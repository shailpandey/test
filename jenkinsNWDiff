node {

    stage('SCM') {
    	echo 'Gathering code from version control'
	checkout scm
    }
    stage('Build') {
        echo 'Building....'
        echo 'Building New Feature'
    }
   
    stage('getfilelist')
{
def result
findtffileclos = { 
    			it.eachDir(findtffileclos);
			it.eachFileMatch(~/.*.tf/) {file->
			result+="${file.absolutePath}\n"
			}
}

    stage('Test') {
        echo 'Testing....'
    }
    stage('Deploy') {
        echo 'Deploying....'
    }
}
